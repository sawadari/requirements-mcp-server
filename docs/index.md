---
title: 要求管理MCPサーバー
description: エラーゼロ/警告削減/合格率向上を「自動検証×自動修正×原則ベース」で実現。要求の品質と意思決定速度を最大化するエンジニアリング・サーバー。
---

# 要求の品質を、"レビュー前"から"レビュー済み水準"へ。

**要求管理MCPサーバー**は、要求データを「読み込み → 自動検証 → 自動修正 → 再検証 → レポート化」まで一気通貫。
**エラー0・警告削減・合格率向上**を、**原則（Principles）×オントロジー**に基づく機械的なルール運用で達成します。

- ✅ **エラー 100%解消**（初期29件→最終0件）
- ✅ **警告 27%削減** / **情報 8%削減**
- ✅ **合格率 2倍**（3.1%→6.3%）
- ✅ **平均品質スコア 85.0/100** の継続改善

[今すぐ試す](#はじめ方) ・ [詳細を見る](#効果実績)

---

## 効果実績

本ページの数値は、プロジェクト内で実行した**実データ**の検証・改善ログに基づきます。

### フェーズ1：エラー撲滅（基盤整備）

| 指標 | 改善前 | 改善後 | 改善率 |
|------|--------|--------|--------|
| **エラー** | 29件 | **0件** | ✅ **100%解消** |
| **警告** | 79件 | 45件 | 📉 **43%減** |
| **情報** | 32件 | 13件 | 📉 **59%減** |
| **平均品質スコア** | - | **83.9/100** | ✨ **高品質達成** |

**整備内容：**
- 重複要求14件削除（テスト要求、不正ID含む）
- 階層・グラフ健全性の完全修復
- `refines`関係の正規化
- オントロジー整合性の回復（`functional` → `system_functional`統一）

> 詳細：[VALIDATION-SUMMARY.md](../VALIDATION-SUMMARY.md)（実施日: 2025-10-21）

### フェーズ2：警告・情報の品質改善（運用/記述品質の底上げ）

| 指標 | フェーズ1後 | フェーズ2後 | 改善率 |
|------|-------------|-------------|--------|
| **警告** | 45件 | **33件** | 📉 **27%減** |
| **情報** | 13件 | **12件** | 📉 **8%減** |
| **合格率** | 3.1% | **6.3%** | ✨ **2倍** |
| **平均品質スコア** | 83.9 | **85.0** | ✨ **+1.1pt** |

**主施策：**
- 主語付与（E3解消）: 18件
- 曖昧語の具体化（E1解消）: 8件
- 冗長記述の圧縮（E4解消）: 7件
- 抽象度差（C2）調整: 10件
- 単一性（E5）改善: 2件

**合計33件の改善を実施**

> 詳細：[IMPROVEMENT-REPORT.md](../IMPROVEMENT-REPORT.md)（実施日: 2025-10-21）

---

## なぜ、その効果が"機械的に"出るのか

**ポイントは3つ。**

### 1. 原則ベース（Principles）設計

要求は**完全性・整合性・品質・効率・トレーサビリティ**を満たすべきという原則を明文化し、
それを**検証ルール**と**修正ポリシー**に落とし込みます。

- 段階（Stakeholder→System→Functional）の**段階的詳細化**
- 親子関係の**MECE原則**／**粒度一貫性**
- **妥当性**（構造・意味・論理）で評価し、不足は**修正**する

### 2. オントロジー駆動（Ontology）

段階・派生・粒度・バリデーションを**外部スキーマ**で定義可能。
ドメイン/プロジェクト特性に合わせて**段階やルールを差し替え**できるため、
**"汎用のルールエンジン"**として要件記述の品質を底上げします。

**3つの標準オントロジーを提供：**
- **デフォルト**: stakeholder → system → system_functional（3段階）
- **組込みシステム**: mission → capability → subsystem → component（4段階）
- **Web/AI**: user_story → feature → (api/model) → implementation（5段階、分岐あり）

### 3. Fix Engine（自動修正）× 再検証の反復

違反検出→**修正プラン生成**→**プレビュー/適用**→**ロールバック保証**→**再検証**のループで、
**レビュー負荷を削減**しつつ**品質スコア**を押し上げます。

> 参考資料：
> - [REQUIREMENTS-PRINCIPLES.md](../REQUIREMENTS-PRINCIPLES.md)（要求管理の要諦）
> - [ONTOLOGY-GUIDE.md](../ONTOLOGY-GUIDE.md)（段階/派生/粒度/検証ルールの外部化）
> - [PRINCIPLES-COMPLIANCE-ANALYSIS.md](../PRINCIPLES-COMPLIANCE-ANALYSIS.md)（原則と実装の対応、現状ギャップ/改善計画）

---

## 仕組みとアーキテクチャ

MCP（Model Context Protocol）を介して**エディタ/AI**とつながる**サーバー型**。
CLIからでも、Claude Code等のエディタ連携からでも同じ**検証・修正・可視化**体験が可能です。

### パイプライン

```
┌─────────┐   ┌──────────┐   ┌──────────┐   ┌─────────┐   ┌──────────┐
│ 取込    │→  │ 自動検証 │→  │ 自動修正 │→  │ 再検証  │→  │ レポート │
│ (Load)  │   │ (Validate)│   │ (Fix)    │   │ (Re-Val)│   │ (Report) │
└─────────┘   └──────────┘   └──────────┘   └─────────┘   └──────────┘
```

1. **取込**：JSON/CSV等の要求をロード
2. **自動検証**：階層/グラフ健全性/MECE/抽象度/スタイル
3. **自動修正**：ポリシーに基づく分割・統合・主語付与・曖昧語置換 等
4. **再検証**：ChangeSet適用後に再スコアリング
5. **レポート化**：サマリ&詳細レポート、ビュー自動生成

### 主要コンポーネント

- **Validation Engine**（Structure/MECE/NLP/LLM）
- **Fix Engine**（Planner/Executor/Change Engine、ロールバック保証）
- **Impact Analyzer**（親子/兄弟/横依存の波及チェック）
- **Ontology Manager**（外部スキーマのロード・検証）
- **Webビューアー**（ツリー/検索/マトリクス/自動更新）

> 参考：[README.md](../README.md)（機能一覧・MCPツール・ビュー・設定サンプル）

---

## 主な機能（抜粋）

### 要求管理
- **CRUD操作**：要求の追加、取得、更新、削除、検索
- **依存関係管理**：要求間の依存関係を定義・追跡
- **影響範囲分析**：要求の変更が他の要求に与える影響を自動分析

### 自動検証
- **構造検証**：必須フィールド、階層関係、循環参照
- **MECE検証**：兄弟要求の重複、親要求のカバレッジ
- **抽象度検証**：親子間の具体化度、兄弟間の一貫性
- **スタイル検証**：主語の有無、曖昧な表現、文章長

### Fix Engine
- **ポリシー駆動**：分割・統合・リンク再配線の自動実行
- **トランザクション保証**：ChangeSetによる可逆性
- **3つのモード**：Strict（自動適用）/Suggest（提案）/Assist（プレビュー）

### ビュー出力
- **Markdown/HTML/CSV**：トレース・マトリクス、Critical/進行中ビュー
- **Webビューアー**：ツリー/検索フィルタ/マトリクス/カスタムビュー/自動リフレッシュ

### MCP統合
- **Claude Code等と双方向操作**：エディタから直接要求管理
- **14種類のMCPツール**：add_requirement, update_requirement, analyze_impact等

---

## はじめ方

### 1. セットアップ

```bash
# リポジトリをクローン
git clone https://github.com/yourusername/requirements-mcp-server.git
cd requirements-mcp-server

# 依存関係をインストール
npm install

# ビルド
npm run build
```

### 2. サーバー起動

```bash
# 開発モード（tsx）
npm run dev

# または、ビルド済みJSで起動
npm start
```

### 3. エディタ（Claude Code 等）からMCP登録

`mcp-servers.json`または`claude_desktop_config.json`に以下を追加：

```json
{
  "mcpServers": {
    "requirements": {
      "command": "node",
      "args": ["/path/to/requirements-mcp-server/dist/index.js"]
    }
  }
}
```

### 4. 検証の実行・レポート確認

```bash
# 検証スクリプトを実行
npx tsx validate-requirements.ts

# レポートを確認
cat VALIDATION-SUMMARY.md
cat IMPROVEMENT-REPORT.md
cat validation-report.md
```

### 5. ビュー生成（Markdown/HTML/CSV）

```bash
# ビュー生成スクリプトを実行
npx tsx scripts/generate-views.ts

# Webビューアーを起動
npm run view-server
# ブラウザで http://localhost:3001 を開く
```

---

## 詳細レポート抜粋（"課題→打ち手→効果"）

### 主語欠如（E3）

**課題**: 15件の要求で主語が明示されていない
**打ち手**: 18件に主語追加（例：「システムは、…」「製造部門が、…」）
**効果**: 可読性向上、責任境界が明確化

### 曖昧語（E1）

**課題**: 「など」などの曖昧な表現が8件
**打ち手**: 具体例に置換（API/プロトコル/パラメータまで明記）
**効果**: 曖昧さ低減、実装可能性向上

**例：**
- 修正前: 「移動指示（前進、後退、停止、回転）」
- 修正後: 「移動指示（前進、後退、左回転、右回転、停止）」

### 冗長（E4）

**課題**: 説明が200トークンを超える要求が複数
**打ち手**: 要点を圧縮し200トークン以下に調整
**効果**: 読みやすさ改善（平均46%削減）

**例：**
- FUNC-001: 219トークン → 約130トークン（▼41%）
- FUNC-003: 235トークン → 約120トークン（▼49%）

### 抽象度差（C2）

**課題**: 親子間での具体化度が不明瞭
**打ち手**: 技術詳細を追加（A*/Dijkstra、CAN 10Hz送信等）
**効果**: 実装可能性向上、設計の明確化

### 単一性（E5）

**課題**: 複数の関心事が混在する要求
**打ち手**: 単一機能に焦点を絞り簡潔化
**効果**: レビュー効率向上、リグレッション防止

> 例や数値・個票は[validation-report.md](../validation-report.md)に一覧化。
> 「どの要求が」「どの違反に」「どの修正が効いたか」を**追跡可能**です。

---

## よくある質問（FAQ）

### Q. 既存のALM/PLMやWikiと共存できますか？

**A.** はい。要求データを**エクスポート/インポート**して本サーバーで**品質整備**→元システムへ**リンク/反映**が現実的です。JSON/CSVフォーマットに対応しています。

### Q. ドメイン固有の段階や粒度ルールに変えられますか？

**A.** 可能です。**オントロジー/粒度/検証ルール**を**外部JSON**で定義できます。組込み/Web/AIなどに**一発切替**。

**例：**
```bash
# 組込みシステム向けオントロジーを使用
export ONTOLOGY_SCHEMA_PATH=./config/ontology-embedded-system.json
npm start
```

### Q. 自動修正のリスクは？

**A.** **トランザクション＋ロールバック**で可逆性を担保。**プレビュー適用**も選べます（Strict/Suggest/Assist）。すべての変更はChangeSetとして記録され、いつでもロールバック可能です。

### Q. LLM評価は必須？

**A.** 必須ではありません。構造/規則ベースで十分な効果が出ます。LLMは**抽象度/カバレッジの微調整**に有効ですが、オプション機能です。

### Q. どのくらいの要求数まで対応できますか？

**A.** 数百件規模で実績があります。1000件以上の場合は、パフォーマンスチューニングや分割管理を推奨します。

### Q. CI/CDに組み込めますか？

**A.** はい。検証スクリプトは終了コードで成否を返すため、GitHub Actions等のCI/CDパイプラインに組み込み可能です。

---

## 最後に：レビュー工数を"減らしながら"品質を上げる

**ルール化**（Principles）× **外部化**（Ontology/Policy）× **反復**（検証→修正→再検証）
**可視化**（View/Report）× **接続**（MCP/エディタ/CI）

**だから、短期間で"エラーゼロ→警告削減→合格率向上"が機械的に出せます。**

### 実績データ

- ✅ エラー: **29件 → 0件（100%解消）**
- ✅ 警告: **79件 → 33件（58%削減）**
- ✅ 情報: **32件 → 12件（62%削減）**
- ✅ 合格率: **2.2% → 6.3%（3倍）**
- ✅ 平均品質スコア: **85.0/100**

### 始めるための3ステップ

1. **[GitHubからクローン](https://github.com/yourusername/requirements-mcp-server)**
2. **`npm install && npm run build`**
3. **`npx tsx validate-requirements.ts`**

[今すぐ始める](#はじめ方) ・ [GitHubで見る](https://github.com/yourusername/requirements-mcp-server)

---

<div style="text-align: center; padding: 2rem; background: #f5f5f5; margin-top: 3rem;">
  <h3>要求の品質を、機械的に、確実に。</h3>
  <p>requirements-mcp-server</p>
  <p><a href="https://github.com/yourusername/requirements-mcp-server">GitHub</a> | <a href="../README.md">ドキュメント</a> | <a href="../ONTOLOGY-GUIDE.md">オントロジーガイド</a></p>
</div>

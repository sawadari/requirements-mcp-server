# 要求管理システムの要諦

## 目的

### 要求の完全性と整合性の確保
- システムを開発するための要求について定義し、抜け漏れなく要求を定義する
- 要求の変更が生じた際は影響する要求をすべて論理的に整合する

### 品質と効率性の追求
- 効率的かつ品質のよい要求構造を作成し維持する

---

## 制約

### オントロジーとセマンティクスの拘束
- 要求はオントロジーとセマンティクスに拘束される

### 妥当性評価
- 要求は妥当性によって評価される
- 評価結果が悪ければ修正される

---

## オントロジー

### 要求の段階的詳細化

要求は以下の段階を経て詳細化される：

1. **ステークホルダ要求（Stakeholder Requirements）**
   - システムを利用するステークホルダのニーズと期待
   - 最上位の要求

2. **システム要求（System Requirements）**
   - システム自身がもつ要求
   - システムをブラックボックスとしてみたときの要求
   - ステークホルダ要求から派生

3. **システム機能要求（System Functional Requirements）**
   - システムを実現するためにアーキテクチャがもつ要求
   - システムをホワイトボックスとしてみたときの要求
   - 物理アーキテクチャーに依存しない
   - システム要求から派生

**詳細化の流れ**: ステークホルダ要求 → システム要求 → システム機能要求

### 要求の分解と統合

#### 分解（Decomposition）
- 要求は、個々の要求に分解可能である
- より具体的で詳細な要求へと分割される

#### 統合（Integration）
- 要求は、個々の要求を統合可能である
- 複数の要求を一つの包括的な要求にまとめられる

### 上位要求と下位要求の関係

#### 定義
- **上位要求（Parent Requirement）**: 特定の要求に対して、統合的な要求
- **下位要求（Child Requirement）**: 上位要求からみた自身、または自身より分解された要求

#### MECE原則
- 上位要求と下位要求は**MECE（Mutually Exclusive, Collectively Exhaustive）**の関係性がある
- 下位要求群は：
  - 互いに重複しない（Mutually Exclusive）
  - 上位要求を完全にカバーする（Collectively Exhaustive）

#### 多層構造
- 要求の段階は、上位要求と下位要求という見方もできる
- 特定の段階においても上位要求と下位要求が定義できる
- 階層構造が形成される

### 粒度の一貫性

特定の段階にある要求は、以下の粒度が揃っていること：
- **文章の長さ**: 同程度の記述量
- **抽象度**: 同じレベルの抽象性
- **詳細度**: 同じレベルの具体性

---

## セマンティクス

### 要求の構成要素

要求は以下の属性で定義される：

1. **主題（Title）**: 要求の概要
2. **説明（Description）**: 要求の詳細内容
3. **理由（Rationale）**: 要求の根拠と背景
4. **その他の属性**: カスタマイズ可能な追加属性

### 属性のカスタマイズ

- 属性は特に**要求の段階によってカスタマイズされる**
- 各段階（ステークホルダ要求、システム要求、システム機能要求）に応じた属性セット
- プロジェクトやドメインに応じた属性の拡張が可能

---

## 妥当性（Validity）

### オントロジーとセマンティクスへの適合

要求が以下に合致すること：
- オントロジーで定義された構造に従っている
- セマンティクスで定義された属性を持っている

### 意味的整合性

要求と要求の間に以下が確保されていること：
- **意味的な連続性**: 要求間の意味的なつながり
- **整合性**: 矛盾がない
- **論理性**: 論理的に導出可能

### 品質評価

- 妥当性によって要求の品質を評価
- 評価結果が不十分な場合は修正を実施

---

## ツール的側面

### 影響分析（Impact Analysis）

要求は要求の構造があり、それはオントロジーに影響を受けるため：
- **要求の追加・変更・削除には影響分析が必要**
- 影響分析によって影響範囲が明確になる
- 依存関係を持つ要求を自動的に特定

### 整合性の維持

- **影響範囲内で要求が正しく妥当性をもって追加・変更・削除される**
- 自動検証による整合性チェック
- 修正提案の自動生成

### トレーサビリティ

- 要求間の依存関係の追跡
- 変更履歴の記録
- 影響範囲の可視化

---

## 可変性（Variability）

### システムの可変性
- 要求は特定のシステムについて定義される
- そのシステムは可変である
- システムの進化に伴い要求も進化する

### オントロジーの可変性
- オントロジーは可変である
- プロジェクトやドメインに応じて調整可能
- 要求の段階や階層構造をカスタマイズ可能

### セマンティクスの可変性
- セマンティクスは可変である
- 属性セットの追加・変更・削除が可能
- プロジェクト固有の属性定義が可能

---

## 運用シチュエーション

### 初期設定（Setup Phase）

1. **ルール化とルール設定**
   - 特定システムについて、オントロジーとセマンティクスが定義される
   - 要求の段階、属性、検証ルールを設定
   - プロジェクト固有のカスタマイズを実施

### 要求構造の構築（Construction Phase）

2. **トップダウンアプローチ**
   - 上位から要求を作成
   - 要求を派生させる（ステークホルダ要求 → システム要求 → システム機能要求）
   - 洗練させて要求の構造を構築
   - MECE原則に基づく分解

### 継続的メンテナンス（Maintenance Phase）

3. **変更管理**
   - 要求に変更があった場合、影響分析を実施
   - 影響範囲を特定
   - 構造的に妥当性があるよう効率的にメンテナンス
   - 自動検証と修正提案を活用

### 品質保証（Quality Assurance）

4. **継続的検証**
   - 妥当性評価の定期実行
   - 整合性チェックの自動化
   - 品質メトリクスの監視

---

## 実装における重要原則

### 1. 構造的整合性の維持
- 常にオントロジーに従った構造を維持
- 親子関係・依存関係の整合性を保証

### 2. MECE原則の徹底
- 下位要求が重複しない
- 下位要求が上位要求を完全にカバーする

### 3. 粒度の一貫性
- 同一レベルの要求は同じ粒度を保つ
- 抽象度・詳細度の統一

### 4. トレーサビリティの確保
- すべての要求の由来を追跡可能に
- 変更履歴の完全な記録

### 5. 自動化の推進
- 影響分析の自動化
- 妥当性検証の自動化
- 修正提案の自動生成

---

## 適用例

### ステークホルダ要求の例
```
REQ-SH-001: ユーザーが商品を簡単に検索できること
├─ REQ-SYS-001: システムは検索機能を提供すること
   ├─ REQ-FUNC-001: 検索UIを提供すること
   ├─ REQ-FUNC-002: 検索エンジンが商品データベースを検索すること
   └─ REQ-FUNC-003: 検索結果を表示すること
```

### MECE原則の適用
- REQ-FUNC-001、002、003は互いに重複しない（Mutually Exclusive）
- 3つを合わせると REQ-SYS-001 を完全にカバーする（Collectively Exhaustive）

---

## まとめ

要求管理システムは以下を実現する：

1. **完全性**: 抜け漏れのない要求定義
2. **整合性**: 論理的に整合した要求構造
3. **品質**: 妥当性に基づく高品質な要求
4. **効率性**: 自動化による効率的なメンテナンス
5. **トレーサビリティ**: 完全な追跡可能性
6. **柔軟性**: 可変性による適応力

これらの原則に基づき、システム開発における要求管理の質と効率を最大化する。

---

最終更新: 2025-10-21
バージョン: 1.0.0
